<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Recommender</title>
    <link rel="stylesheet" href="static/styles.css">
</head>
<body>

<h2>Anime Recommender System</h2>

<form id="predictForm" method = "post">
    <label f or="age">Customer Name:</label>
    <input type="text" id="name" name="name" placeholder="Enter full name" required>

    <label for="gender">Customer Gender:</label>
    <select id="gender" name="gender" required>
        <option value="">Select gender</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Other">Other</option>
    </select>

    <label for="age">Customer Age:</label>
    <input type="number" id="age" name="age" min="0" placeholder="Enter age" required>

    <label for="income">Annual Income (k$):</label>
    <input type="number" id="income" name="income" min="0" placeholder="Enter annual income" required>

    <label for="spendingscore">Spending Score (1-100):</label>
    <input type="number" id="spendingscore" name="spendingscore" min="1" max="100" placeholder="Enter score" required>

    <button type="submit">Predict</button>
</form>


<div id="result">

    <script>
        document.getElementById('predictForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            // Read form values
            const age = parseFloat(document.getElementById('age').value);
            const income = parseFloat(document.getElementById('income').value);
            const spendingscore = parseFloat(document.getElementById('spendingscore').value);

            // Create JSON payload
            const data = {
                'Age': age,
                'Annual Income (k$)': income,
                'Spending Score (1-100)':spendingscore
            };

            try {//const response = await fetch('http://127.0.0.1:5000/api/random_forest_classifier', {
                console.log(data)
                const response = await fetch('https://127.0.0.1/api/predict_kmeans_clustering', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                document.getElementById('result').innerText = 'Prediction: ' + result['Predicted Cluster = '];

            } catch (error) {
                console.error('Error:', error);
                console.log(data);
                document.getElementById('result').innerText = 'An error occurred while making the prediction.';
            }
        });
    </script>

</div>
</body>
</html>
